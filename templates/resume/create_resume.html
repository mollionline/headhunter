{% extends 'base.html' %} {% block content %}
    <h1 >Создать резюме</h1>
    <form id="form-all" action="{% url 'create_resume' %}" method="POST">
        {% include 'partial/resume/resume_forms.html' with is_edit=False %}
    </form>

    <script type="application/javascript">
        function formOpen(e) {
            e.preventDefault()
            $('#myform_place').removeClass('d-none')
        }
        $('#experience-but').click(formOpen)
        function createEx (e) {
            e.preventDefault()
            let name_company = $('#name_company').val()
            let start_date = $('#start_date').val()
            let end_date = $('#end_date').val()
            let position = $('#positionEx').val()
            let responsibilities = $('#responsibilities').val()
            $.ajax({
                url: "http://127.0.0.1:8000/api/v1/experience/create/",
                method: "post",
                headers: {
                    Authorization: "Token " + localStorage.getItem("apiToken"),
                },
                data: JSON.stringify({
                    name_company: name_company,
                    start_date: start_date,
                    end_date: end_date,
                    position: position,
                    responsibilities: responsibilities
                }),
                dataType: "json",
                contentType: "application/json",
                success: function (data, status) {
                    $('#experience').append(`<p>${data.name_company}: ${data.position} - (${data.start_date})-(${data.end_date})</p>`)
                    $('#work_experience').append(`<option value="${data.id}" selected ></option>`)
                    $('#myform_place').addClass('d-none')
                },
                error: function (response, status) {
                    console.log(response);
                },
            });
        }
        $('#addEx').click(createEx)
    </script>
{% endblock %}